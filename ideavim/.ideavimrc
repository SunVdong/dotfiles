" ===== 基础 =====
set number              " 显示行号
set relativenumber      " 相对行号
set ignorecase
set smartcase
set incsearch
set hlsearch
set clipboard+=unnamedplus

set ttimeout
set ttimeoutlen=50
inoremap jj <Esc>


" insert 模式下快速移动
inoremap <C-h> <Left>
inoremap <C-l> <Right>
inoremap <C-j> <Down>
inoremap <C-k> <Up>


let mapleader=" "

" ===== 文件 =====
map <leader>w :w<CR>
map <leader>q :q<CR>
map <leader>x :x<CR>
map <leader>f <Action>(ReformatCode)
map <leader>e <Action>(RecentFiles)

" ===== 跳转 =====
map <leader>d <Action>(GotoDeclaration)
map <leader>i <Action>(GotoImplementation)
map <leader>b <Action>(Back)

" ===== 搜索 =====
map <leader>/ <Action>(Find)
map <leader>a <Action>(SearchEverywhere)
map <leader>l <Action>(FindInPath)

" ===== 重构 =====
map <leader>r <Action>(Refactorings)
map <leader>n <Action>(RenameElement)

" ===== 面板 =====
map <leader>o <Action>(FileStructurePopup)
map <leader>p <Action>(ActivateProjectToolWindow)
map <leader>t <Action>(ActivateTerminalToolWindow)

" =========================
" 窗口（Vim 分屏）
" =========================
map <leader>h <C-w>h
map <leader>j <C-w>j
map <leader>k <C-w>k
map <leader>l <C-w>l

" ===== flash =====
nmap s <Action>(flash.search)
xmap s <Action>(flash.search)

" 增强 f/F/t/T
nmap f <Action>(flash.find)
xmap f <Action>(flash.find)

nmap F <Action>(flash.find_backward)
xmap F <Action>(flash.find_backward)

nmap t <Action>(flash.till)
xmap t <Action>(flash.till)

nmap T <Action>(flash.till_backward)
xmap T <Action>(flash.till_backward)

nmap ; <Action>(flash.repeat)
xmap ; <Action>(flash.repeat)

nmap , <Action>(flash.repeat_backward)
xmap , <Action>(flash.repeat_backward)

" Ctrl + S 保存
nnoremap <C-s> :w<CR>
inoremap <C-s> <Esc>:w<CR>a

" 不抢 IDE 的快捷键
sethandler <C-f> a:ide
sethandler <C-r> a:ide
